<!DOCTYPE html>
<html>
    <head>
        <!-- Importa o FontAwesome para os √≠cones -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

        <!-- Importa o arquivo de estilo CSS personalizado para a p√°gina de listagem de alunos -->
        <link rel="stylesheet" href="../static/styles/listar-aluno.css">
        <link rel="stylesheet" href="../static/styles/variaveis.css">
        <script src="/static/js/lista-escola.js"></script>
        <title>Listar Aluno</title>
    </head>

    <body>
        <header>
            <button class="button-back" type="button">
                <a href="/pag-inicial-motorista"><img src="/static/icones/seta-voltar.png" alt="imagem de uma seta para esquerda"></a>
            </button>
            <figure>
                <div class="logo">
                    <a href="/pag-inicial-motorista"><img src="/static/icones/movebr.png" alt="logo da movebr"></a>
                </div>
            </figure>
        </header>

        <main>
            <section class="c-table">
                <div class="title">
                    <h2>Passageiros</h2>
                    <a href="/cadastrar-aluno" class="btn-cadaluno"><button> + Cadastrar Aluno </button></a>
                </div>

                <div class="search-container">
                    <input type="text" placeholder="Pesquisar..." class="search-input">
                    <button class="search-button">üîç</button>
                </div>

                <div class="container-listagem-busca">
                    <h3>Escolas:</h3>
                    <form method="GET" action="{{ url_for('listar_alunos') }}">
                        <select name="escola" onchange="this.form.submit();" class="select-escola">
                            <option value="">Selecione uma escola</option>
                            <option value="" id="btn-todos">Todos</option>
                            {% for escola in escolas %}
                            <option value="{{ escola }}" id="btn-{{ escola }}">{{ escola }} </option>
                            {% endfor %}
                        </select>
                    </form>
                </div>
            </section>
        

            
        
            {% if alunos %}
            <h2 class="AA">Alunos cadastrados:</h2>
            {% else %}
            <h2 class="AA">Voc√™ ainda n√£o possui alunos cadastrados.</h2>
            {% endif %}
        
            {% for aluno in alunos %}

            

            <table class="alunos-listados">
                <div class="container-tabela">
                    <tbody>
                        <tr class="aluno">
                            <td>
                                <div class="perfil-aluno">
                                    <div class="foto-aluno">
                                        <img src="{{aluno['foto_aluno']}}" alt="Foto do Aluno">
                                    </div>
                                    <div class="info-aluno">
                                        <h2>{{aluno['nome_aluno']}}</h2>
                                        <p><strong>Nome do respons√°vel:</strong> {{aluno['nome_responsavel']}}</p>
                                        <p><strong>Telefone do respons√°vel:</strong> {{aluno['telefone_responsavel']}}</p>
                                    </div>
                                </div>
        
                                <div class="detalhes" style="display: none;">
                                    <div class="info-transporte">
                                        <div class="titulo-editar">
                                            <h3>Informa√ß√µes de Transporte</h3>
                                            <a href="/editar-aluno/{{aluno['id_aluno']}}"><button class="btn-editar"><img class="icon-editar" src="/static/icones/editar.png" alt="√çcone Editar"></button></a>
                                        </div>

                                        <p><strong>Endere√ßo:</strong> {{aluno['endereco']}}</p>
                                        <p><strong>Escola:</strong> {{aluno['escola']}}</p>
                                    </div>
        
                                    <div class="info-extra">
                                        <h3>Condi√ß√£o M√©dica</h3>
                                        <p>{{aluno['condicao_medica']}}</p>
                                    </div>
                
                                    <div class="container-btn-excluir">
                                        <a href="/quebra-contrato/{{aluno['id_aluno']}}"><button>Excluir Aluno</button></a>
                                    </div>
                                </div>
        
                                <div class="button-container">
                                    <button class="btn-expandir" onclick="toggleExpandir(this)">‚ñº</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </div>
            </table>
            {% endfor %}
        </main>
        
        <script>
            function toggleExpandir(button) {
                const alunoRow = button.closest('.aluno');
                const detalhesContainer = alunoRow.querySelector('.detalhes');
        
                if (detalhesContainer.style.display === 'none') {
                    detalhesContainer.style.display = 'block';
                    button.textContent = '‚ñ≤';
                } else {
                    detalhesContainer.style.display = 'none';
                    button.textContent = '‚ñº';
                }
            }
        </script>        
    </body>
</html>