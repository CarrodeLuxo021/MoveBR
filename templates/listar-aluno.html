<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Listar Aluno</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../static/styles/listar-aluno.css">
    <link rel="stylesheet" href="../static/styles/variaveis.css">
    <script defer src="/static/js/lista-escola.js"></script>
</head>

<body>
<main>
    <header>
        <button class="button-back" type="button">
            <a href="/pag-inicial-motorista"><img src="/static/icones/seta-voltar.png" alt="Voltar"></a>
        </button>
        <figure>
            <div class="logo"><img src="/static/icones/logo.png" alt="Logo da MoveBR"></div>
        </figure>
    </header>

    <section class="c-table">
        <div class="title">
            <h1>Passageiros</h1>
            <a href="/cadastrar-aluno" class="btn-cadaluno"><button> + Cadastrar Aluno </button></a>
        </div>

        <div class="container-busca">
            <form action="/listar-alunos" method="get">
                <input type="text" name="query" class="input-busca" placeholder="Buscar...">
                <button class="icone-busca" type="submit">üîç</button>
            </form>
        </div>
    </section>

    <!-- Exibi√ß√£o da contagem de alunos -->
    <div id="contagem-alunos" style="margin: 20px 0; font-weight: bold;">Total geral de alunos: 0</div>

    <!-- Bot√µes para filtrar por escola -->
    <div class="container-listagem-busca">
        <h2>Escolas</h2>
        <ul>
            <li><button class="btn-escola" onclick="exibirContagem()">Todos</button></li>
            <!-- Lista das escolas para filtros -->
            <li><button class="btn-escola" onclick="exibirContagem('Escola A')">Escola A</button></li>
            <li><button class="btn-escola" onclick="exibirContagem('Escola B')">Escola B</button></li>
        </ul>
    </div>

    
</main>

<script>
    // Fun√ß√£o para contagem de alunos
    function exibirContagem(escola = null) {
        const alunos = document.querySelectorAll('.aluno');
        let contagem = 0;

        alunos.forEach(aluno => {
            const escolaAluno = aluno.getAttribute('data-escola');
            
            if (!escola || escolaAluno === escola) {
                contagem++;
            }
        });

        const contagemTexto = escola ? 
            `Total de alunos na escola ${escola}: ${contagem}` : 
            `Total geral de alunos: ${contagem}`;
        
        document.getElementById("contagem-alunos").textContent = contagemTexto;
    }

    // Exibe a contagem geral ao carregar a p√°gina
    document.addEventListener("DOMContentLoaded", () => exibirContagem());
</script>
</body>
</html>
