<title>Listar Aluno</title>

<!-- Importa o FontAwesome para os √≠cones -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Importa o arquivo de estilo CSS personalizado para a p√°gina de listagem de alunos -->
<link rel="stylesheet" href="../static/styles/listar-aluno.css">
<link rel="stylesheet" href="../static/styles/variaveis.css">
<script src="/static/js/lista-escola.js"></script>

<!-- Conte√∫do principal da p√°gina -->
<main>

    <header>
        <figure>
            <div class="logo"><a href="/pag-inicial-motorista"><img src="/static/icones/logo.png" alt="logo da movebr"></a></div>
            <div class="menu-icon" id="menu-icon">
                <img src="/static/icones/menu.png" alt="Perfil" id="profile-icon"/>
            </div>
        </figure>
    </header>

    <nav id="menu" class="menu">
        <a href="/pag-inicial-motorista"><button class="card" id="pagInicial" aria-label="pagInicial">
            <img src="/static/icones/inicio.png" alt="√çcone de in√≠cio" />
            <p>In√≠cio</p>
        </button></a>

        <a href="/historico_pagamento"><button class="card" id="Cash" aria-label="Pagamentos">
            <img src="/static/icones/dinheiro.png" alt="√çcone de pagamentos" />
            <p>Pagamentos</p>
        </button></a>
    </nav>

 


    <section class="c-table">
        <!-- √Årea de busca -->
        <div class="title">
            <h1>Passageiros</h1>
        </div>

        <div class="container-busca">
            <form action="/listar-alunos" method='get'>
                <input type="text" name="query" class="input-busca" placeholder="Buscar...">
                <button class="icone-busca" type="submit">üîç</button>
            </form>
        </div>
    </section>
     <!-- Bot√µes para filtrar por escola -->
<div class="container-listagem-busca">
    <h2>Escolas</h2>
    <ul>
        <!-- Bot√£o para exibir todos os alunos, aparece apenas uma vez -->
        <li>
            <form method="GET" action="{{ url_for('listar_alunos') }}">
                <button type="submit" class="btn-escola" id="btn-todos">Todos</button>
            </form>
        </li>

        <!-- Bot√µes para cada escola, baseados na lista de escolas -->
        {% for escola in escolas %}
        <li>
            <form method="GET" action="{{ url_for('listar_alunos', escola=escola) }}">
                <button type="submit" class="btn-escola" id="btn-{{ escola }}">{{ escola }}</button>
            </form>
        </li>
        {% endfor %}
    </ul>
</div>

    {% if alunos %}
        <h2 class="AA">Alunos cadastrados:</h2>
    {% else %}
        <h2 class="AA">Voc√™ ainda n√£o possui alunos cadastrados.</h2>
    {% endif %}

    {% for aluno in alunos %}
    <!-- Tabela de alunos -->
    <table class="alunos-listados">
        <div class="container-tabela">
            <tbody>
                <!-- Estrutura de cada linha de aluno na tabela -->
                <tr class="aluno">
                    <td>
                        <!-- Perfil do Aluno -->
                        <div class="perfil-aluno">
                            <!-- Foto do Aluno -->
                            <div class="foto-aluno">
                                <img src="{{aluno['foto_aluno']}}" alt="Foto do Aluno">
                            </div>
                            <!-- Informa√ß√µes b√°sicas do aluno -->
                            <div class="info-aluno">
                                <h2>{{aluno['nome_aluno']}}</h2>
                                <p><strong>Nome do respons√°vel:</strong> {{aluno['nome_responsavel']}}</p>
                                <p><strong>Telefone do respons√°vel:</strong> {{aluno['telefone_responsavel']}}</p>
                            </div>
                        </div>

                        <!-- Container para informa√ß√µes adicionais, inicialmente ocultas -->
                        <div class="detalhes" style="display: none;">
                            <!-- Informa√ß√µes de transporte -->
                            <div class="info-transporte">
                                <h3>Dados Cadastrais</h3>
                                <p><strong>Endere√ßo:</strong> {{aluno['endereco']}}</p>
                                <p><strong>Escola:</strong> {{aluno['escola']}}</p>
                            </div>

                            <!-- Informa√ß√µes extras do aluno -->
                            <div class="info-extra">
                                <h3>Observa√ß√µes</h3>
                                <p>{{aluno['condicao_medica']}}</p>
                            </div>

                            <div class="container-btn-excluir">
                                <a href="/quebra-contrato/{{aluno['id_aluno']}}"><button>Excluir Aluno</button></a>
                            </div>
                        </div>

                        <!-- Bot√£o para expandir/ocultar os detalhes do aluno -->
                        <div class="button-container">
                            <button class="btn-expandir" onclick="toggleExpandir(this)">‚ñº</button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </div>
    </table>
    {% endfor %}
</main>

<!-- Script para manipula√ß√£o de intera√ß√µes e anima√ß√µes -->
<script>
    function toggleExpandir(button) {
        const alunoRow = button.closest('.aluno');
        const detalhesContainer = alunoRow.querySelector('.detalhes');

        if (detalhesContainer.style.display === 'none') {
            detalhesContainer.style.display = 'block';
            button.textContent = '‚ñ≤';
        } else {
            detalhesContainer.style.display = 'none';
            button.textContent = '‚ñº';
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        const menuIcon = document.getElementById('menu-icon');
        const menu = document.getElementById('menu');

        menuIcon.addEventListener('click', function() {
            menu.classList.toggle('show');
        });
    });
</script>
